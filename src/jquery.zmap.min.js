(function(b){b.fn.zmap=function(e){function f(a,b,e){var d;d=a.infowindow instanceof google.maps.InfoWindow?a.infowindow:new google.maps.InfoWindow({content:a.infoContent});google.maps.event.addListener(b,"click",function(){d.open(e,b)})}var a={zoom:8,mapTypeId:google.maps.MapTypeId.ROADMAP,lat:"0",lng:"0",marker:!0,infowindow:!0},d=[(new Date).getTime()^Math.random()];return this.each(function(){_default={};if(b(this).attr("lat"))_default.lat=b(this).attr("lat");if(b(this).attr("lng"))_default.lng=
b(this).attr("lng");_default.address=b(this).text();_default.infoContent=b(this).text();b.extend(a,_default);e&&b.extend(a,e);typeof a.before=="function"&&a.before.call(this,a);latlng=new google.maps.LatLng(parseFloat(a.lat),parseFloat(a.lng));a.center=latlng;b(this).attr("id")?id=b(this).attr("id"):(rand=d.pop()+1,id="zmap_"+rand,d.push(rand));b(this).attr("id",id);map=new google.maps.Map(document.getElementById(id),a);var c=[];if(a.marker){a.marker==!0?(_marker=new google.maps.Marker({position:latlng,
title:a.address}),a.infowindow&&f(a,_marker,map),c.push(_marker)):b.isArray(a.marker)?c=a.marker:c.push(a.marker);var g=map;for(i in c)c[i].setMap(g)}typeof a.after=="function"&&a.after.call(this,map)})}})(jQuery);